# Parts adapted from https://hub.docker.com/r/maluuba/tomcat7/
FROM ubuntu:14.04
MAINTAINER Michael Cassano <mike@thinktospeech.com>

EXPOSE 8080
EXPOSE 8000
RUN apt-get -qq update
RUN apt-get -qq upgrade

RUN apt-get -qq install openjdk-7-jre tomcat7 curl bash unzip
ENV JAVA_OPTS "-Xdebug -Xrunjdwp:transport=dt_socket,address=8000,server=y,suspend=n"
ADD start-tomcat.sh /opt/start-tomcat.sh
RUN chmod +x /opt/start-tomcat.sh

VOLUME /deployment
RUN chmod -R 777 /deployment
CMD ["/opt/start-tomcat.sh"]
